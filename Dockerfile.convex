# Convex backend Dockerfile
FROM node:22-alpine AS builder
WORKDIR /app
COPY convex/package*.json ./
RUN npm install -g convex@1.18.0 && npm ci
COPY convex/ ./

FROM node:22-alpine
WORKDIR /app
COPY --from=builder /app /app
EXPOSE 4000
CMD ["npx", "convex", "dev", "--hostname", "0.0.0.0"]
